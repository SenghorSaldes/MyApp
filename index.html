<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Portfolio Website</title>
    
    <link rel="stylesheet" href="./CSS/style.css">
    <link rel="canonical" href="https://senghorsaldes.github.io/MyApp" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.11/typed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>
    <link rel="manifest" href="./manifest.webmanifest">
</head>
<body>
<script>
    if(navigator.serviceWorker){
        navigator.serviceWorker.register('./service-worker.js', {scope: './'})
    }
    var $html = document.documentElement
  var $target = document.getElementById('drop-target')
  var $download = document.getElementById('download')
  var $message = document.getElementById('message')
  var $result = document.getElementById('result')
  var $download = document.getElementById('download')
  var $a = document.getElementById('a')

  var canvas = document.createElement('canvas')
  var ctx = canvas.getContext('2d')
  var imageData, imageFile, filename

  var reader = new FileReader()
  var image = new Image()

  function loadImage (src) {
    $message.hidden = false
    $message.textContent = 'Processing...'
    $result.innerHTML = ''
    reader.readAsDataURL(src[0])
    filename = src[0].name.split('.')[0]
  }

  reader.onload = function () {
    // Create new Image in memory for canvas to use
    image.src = reader.result

    // Wait for the Image to load
    image.onload = function () {

      // Setup Canvas & draw image onto it
      canvas.width = this.width
      canvas.height = this.height
      ctx.drawImage(this, 0, 0)
      imgData = ctx.getImageData(0,0, canvas.width, canvas.height)
      if (imgData.data[3] >= 255) { imgData.data[3] = 254 }
      ctx.putImageData(new ImageData(imgData.data, imgData.width, imgData.height), 0, 0)

      $message.hidden = true

      // make an image element and append result div
      var resultImg = document.createElement('img')
      resultImg.src = canvas.toDataURL('image/png')
      resultImg.width = $target.offsetWidth

      // $result.appendChild(resultTitle)
      $result.appendChild(resultImg)

      $download.hidden = false
    }
  }

  function downloadFile () {
    // Create Download Link
    canvas.toBlob(function (blob) {
      // Check if image file was made previously & remove
      if (imageFile !== null) {
        window.URL.revokeObjectURL(imageFile)
      }
      imageFile = window.URL.createObjectURL(blob)
      $a.download = filename + '-translucent.png'
      $a.href = imageFile
      $a.click()
    }, 'image/png')
  }

  $download.addEventListener('click', downloadFile)

  // event listener for drag and drop area
  $html.addEventListener('dragover', function (event) {
    event.preventDefault()
    $target.textContent= 'Drop it!'
    $target.classList.add('drop')
  }, true)
  $html.addEventListener('drop', function (event) {
    event.preventDefault()
    $target.textContent= 'Drag an image here'
    $target.classList.remove('drop')
    loadImage(event.dataTransfer.files)
  }, true)

  // toBlob Polyfill
  if (!HTMLCanvasElement.prototype.toBlob) {
   Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {
    value: function (callback, type, quality) {

      var binStr = atob(this.toDataURL(type, quality).split(',')[1])
      var len = binStr.length
      var arr = new Uint8Array(len)

      for (var i = 0; i < len; i++) {
        arr[i] = binStr.charCodeAt(i)
      }

      callback(new Blob( [arr], {type: type || 'image/png'}))
    }
   })
  }
</script>






    <div class="scroll-up-btn">
        <i class="fas fa-angle-up"></i>
    </div>
    <nav class="navbar">
        <div class="max-width">
            <div class="logo"><img src="./images/logo.png" alt="logo" /></div>
            <ul class="menu">
                <li><a href="#home" class="menu-btn">Garderie</a></li>
                <li><a href="#about" class="menu-btn">Inventaires</a></li>
                <li><a href="#Inventaires" class="menu-btn">Arrétés</a></li>
                <li><a href="#Contacts" class="menu-btn">Contact</a></li>
            </ul>
            <div class="menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- home section start -->
    <section class="home" id="home">
      <div class="max-width">
          <div class="row">
            <div class="home-content">
               <div class="count_button">
                <p> Compteur fréquentation</p>
                <button class="increase"> + </button> 
                <button class="decrease"> - </button> 
                  <div id="counter">0</div>
                  <br><button class="reset" onclick="clearAll()"> reset </button> 
               </div>
            </div>
          </div>
      </div>
    </section>
  

     <!-- about section start -->
  <section class="about" id="about">
    <div class="max-width">
        <h2 class="title">About me</h2>
        <div class="about-content">
            <div class="column left">
              
            </div>
          
            </div>
        </div>
    </div>
</section>

    <!-- footer section start -->
    <footer>
        <span>Created By <a>S3nghor</a> | <span class="far fa-copyright"></span> 2020 All rights reserved.</span>
    </footer>

    <script src="./JS/script.js"></script>
    <script src="./JS/cnt.js"></script>
</body>
</html>
